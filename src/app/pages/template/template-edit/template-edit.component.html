<div class="row mt-2 ml-2 mr-2">
  <div class="col text-left">
    <h4><b>Checklist Template</b></h4>
    <h4>
      <a href="javascript:void(0)" (click)="returnToTemplate()">Templates</a> >
      Update
    </h4>
  </div>
</div>
<div class="example-container">
  <div class="row mt-4 ml-2 mr-2">
    <form class="col-12" #uform="ngForm" autocomplete="off">
      <div class="form-row">
        <div class="form-group col-6">
          <mat-form-field
            appearance="outline"
            class="example-full-width col-12"
          >
            <mat-label>Name</mat-label>
            <input
              matInput
              type="text"
              required
              [disabled]="true"
              name="tempName"
              [(ngModel)]="tempName"
            />
          </mat-form-field>
        </div>
        <div class="col-6">
          <h4><b>Upload PDF for Instruction</b></h4>
          <div class="row">
            <input
              type="file"
              (change)="onFileSelected($event)"
              accept=".pdf"
            />
            <p *ngIf="!fileBool">
              <button
                mat-raised-button
                color="accent"
                style="cursor: pointer; color: aliceblue"
              >
                <a style="color: aliceblue" href="{{ file1 }}" target="_blank"
                  >Open</a
                >
              </button>
            </p>
            &nbsp;&nbsp;&nbsp;
            <p (click)="getPDF()" *ngIf="fileBool">
              <button mat-raised-button color="accent" style="cursor: pointer">
                <a target="_blank">Preview</a>
              </button>
            </p>
          </div>
        </div>
      </div>
      <hr />
      <h4>
        <b>Header</b>
      </h4>
      <div *ngIf="periodicValue == 'Daily'">
        <div class="row" *ngFor="let e of formatData; let i = index">
          <div class="form-group col-3">
            <mat-form-field
              appearance="outline"
              class="example-full-width col-12"
            >
              <mat-label>Name</mat-label>
              <input
                matInput
                type="text"
                id="format"
                name="format"
                [(ngModel)]="e.formatNo"
                required
              />
            </mat-form-field>
          </div>
          <div class="form-group col-3">
            <mat-form-field class="col-6">
              <mat-label>Type</mat-label>
              <mat-select
                name="formattype"
                id="formattype"
                [(ngModel)]="e.formattype"
                style="max-height: 200px; overflow-y: auto"
                required
              >
                <mat-option value="text">Text</mat-option>
                <mat-option value="number">Number</mat-option>
                <mat-option value="date">Date</mat-option>
                <mat-option value="file">Image</mat-option>
              </mat-select>
            </mat-form-field>
            <mat-form-field class="col-6">
              <mat-label>Fill Page</mat-label>
              <mat-select
                name="pageFillformat"
                id="pageFillformat"
                [(ngModel)]="e.pageFillformat"
                style="max-height: 200px; overflow-y: auto"
                required
              >
                <mat-option value="master">Master</mat-option>
                <mat-option value="fillChecklist">Fill Checklist</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="form-group col-3">
            <mat-form-field class="col-6">
              <mat-label>Permission</mat-label>
              <mat-select
                aria-multiselectable="true"
                name="permissionFormat"
                id="permissionFormat"
                [(ngModel)]="e.permissionFormat"
                multiple
                required
              >
                <mat-option
                  *ngFor="let r of role; let i = index"
                  value="{{ r.name }}"
                >
                  {{ r.name }}</mat-option
                >
              </mat-select>
            </mat-form-field>
            <mat-form-field class="col-6">
              <mat-label>Fill type</mat-label>
              <mat-select
                name="fillTypeFormat"
                id="fillTypeFormat"
                [(ngModel)]="e.fillTypeFormat"
                style="max-height: 200px; overflow-y: auto"
                required
              >
                <mat-option value="manual">Manual</mat-option>
                <mat-option value="auto" [disabled]="true">Auto fill</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
        <div class="row" *ngFor="let rn of revisionNOData; let r = index">
          <div class="form-group col-3">
            <mat-form-field
              appearance="outline"
              class="example-full-width col-12"
            >
              <mat-label>Name</mat-label>
              <input
                matInput
                type="text"
                id="revisionNO"
                name="revisionNO"
                [(ngModel)]="rn.revisionNo"
                required
              />
            </mat-form-field>
          </div>
          <div class="form-group col-3">
            <mat-form-field class="col-6">
              <mat-label>Type</mat-label>
              <mat-select
                name="revisionNOType"
                id="revisionNOType"
                [(ngModel)]="rn.revisionNOType"
                style="max-height: 200px; overflow-y: auto"
                required
              >
                <mat-option value="text">Text</mat-option>
                <mat-option value="number">Number</mat-option>
                <mat-option value="date">Date</mat-option>
                <mat-option value="file">Image</mat-option>
              </mat-select>
            </mat-form-field>
            <mat-form-field class="col-6">
              <mat-label>Fill Page</mat-label>
              <mat-select
                name="pagerevisionNo"
                id="pagerevisionNo"
                [(ngModel)]="rn.pagerevisionNO"
                style="max-height: 200px; overflow-y: auto"
                required
              >
                <mat-option value="master">Master</mat-option>
                <mat-option value="fillChecklist">Fill Checklist</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="form-group col-3">
            <mat-form-field class="col-6">
              <mat-label>Permission</mat-label>
              <mat-select
                aria-multiselectable="true"
                name="permissionRevisionNo"
                id="permissionRevisionNO"
                [(ngModel)]="rn.permissionRevisionNO"
                multiple
                required
              >
                <mat-option
                  *ngFor="let r of role; let i = index"
                  value="{{ r.name }}"
                >
                  {{ r.name }}</mat-option
                >
              </mat-select>
            </mat-form-field>
            <mat-form-field class="col-6">
              <mat-label>Fill type</mat-label>
              <mat-select
                name="fillTypeRevisionNo"
                id="fillTypeRevisionNo"
                [(ngModel)]="rn.fillTypeRevisionNo"
                style="max-height: 200px; overflow-y: auto"
                required
              >
                <mat-option value="manual">Manual</mat-option>
                <mat-option value="auto" [disabled]="true">Auto fill</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
        <div class="row" *ngFor="let rd of revisionDateData; let d = index">
          <div class="form-group col-3">
            <mat-form-field
              appearance="outline"
              class="example-full-width col-12"
            >
              <mat-label>Name</mat-label>
              <input
                matInput
                type="text"
                id="revisionDate"
                name="revisionDate"
                [(ngModel)]="rd.revisionDate"
                required
              />
            </mat-form-field>
          </div>
          <div class="form-group col-3">
            <mat-form-field class="col-6">
              <mat-label>Type</mat-label>
              <mat-select
                name="revisionDatetype"
                id="revisionDatetype"
                [(ngModel)]="rd.revisionDatetype"
                style="max-height: 200px; overflow-y: auto"
                required
              >
                <mat-option value="text">Text</mat-option>
                <mat-option value="number">Number</mat-option>
                <mat-option value="date">Date</mat-option>
                <mat-option value="file">Image</mat-option>
              </mat-select>
            </mat-form-field>
            <mat-form-field class="col-6">
              <mat-label>Fill Page</mat-label>
              <mat-select
                name="pagerevisionDate"
                id="pagerevisionDate"
                [(ngModel)]="rd.pagerevisionDate"
                style="max-height: 200px; overflow-y: auto"
                required
              >
                <mat-option value="master">Master</mat-option>
                <mat-option value="fillChecklist">Fill Checklist</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="form-group col-3">
            <mat-form-field class="col-6">
              <mat-label>Permission</mat-label>
              <mat-select
                aria-multiselectable="true"
                name="permissionRevisionDate"
                id="permissionRevisionDate"
                [(ngModel)]="rd.permissionRevisionDate"
                multiple
                required
              >
                <mat-option
                  *ngFor="let r of role; let i = index"
                  value="{{ r.name }}"
                >
                  {{ r.name }}</mat-option
                >
              </mat-select>
            </mat-form-field>
            <mat-form-field class="col-6">
              <mat-label>Fill type</mat-label>
              <mat-select
                name="fillTypeRevisionDate"
                id="fillTypeRevisionDate"
                [(ngModel)]="rd.fillTypeRevisionDate"
                style="max-height: 200px; overflow-y: auto"
                required
              >
                <mat-option value="manual">Manual</mat-option>
                <mat-option value="auto" [disabled]="true">Auto fill</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
      </div>
      <div *ngIf="periodicValue != 'Daily'">
        <div class="row" *ngFor="let sn of shiftData; let n = index">
          <div class="form-group col-3">
            <mat-form-field
              appearance="outline"
              class="example-full-width col-12"
            >
              <mat-label>Name</mat-label>
              <input
                matInput
                type="text"
                id="shiftNo"
                name="shiftNo"
                [(ngModel)]="sn.shift"
                required
              />
            </mat-form-field>
          </div>
          <div class="form-group col-3">
            <mat-form-field class="col-6">
              <mat-label>Type</mat-label>
              <mat-select
                name="shiftType"
                id="shiftType"
                [(ngModel)]="sn.shiftType"
                (selectionChange)="TypeChangeShift()"
                style="max-height: 200px; overflow-y: auto"
                required
              >
                <mat-option value="text">Text</mat-option>
                <mat-option value="number">Number</mat-option>
                <mat-option value="date">Date</mat-option>
                <mat-option value="file">Image</mat-option>
              </mat-select>
            </mat-form-field>
            <mat-form-field class="col-6">
              <mat-label>Fill Page</mat-label>
              <mat-select
                name="pageFillShift"
                id="pageFillShift"
                [(ngModel)]="sn.pageFillShift"
                style="max-height: 200px; overflow-y: auto"
                required
              >
                <mat-option value="master">Master</mat-option>
                <mat-option value="fillChecklist" [disabled]="true"
                  >Fill Checklist</mat-option
                >
              </mat-select>
            </mat-form-field>
          </div>
          <div class="form-group col-3">
            <mat-form-field class="col-6">
              <mat-label>Permission</mat-label>
              <mat-select
                aria-multiselectable="true"
                name="permissionshift"
                id="permissionshift"
                [(ngModel)]="sn.permissionshift"
                multiple
                required
              >
                <mat-option
                  *ngFor="let r of role; let i = index"
                  value="{{ r.name }}"
                >
                  {{ r.name }}</mat-option
                >
              </mat-select>
            </mat-form-field>
            <mat-form-field class="col-6">
              <mat-label>Fill type</mat-label>
              <mat-select
                name="fillTypeShift"
                id="fillTypeShift"
                [(ngModel)]="sn.fillTypeShift"
                (selectionChange)="fillTypeForShift(sn.fillTypeShift)"
                style="max-height: 200px; overflow-y: auto"
                required
              >
                <mat-option value="manual">Manual</mat-option>
                <mat-option value="auto">Auto fill</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div
            class="form-group col-1"
            *ngIf="showShiftDrop || sn.fillFromShift"
          >
            <mat-form-field class="col-12">
              <mat-label>Auto Fill</mat-label>
              <mat-select
                name="fillFromShift"
                id="fillFromShift"
                [(ngModel)]="sn.fillFromShift"
                (selectionChange)="selectAutoFillShift(sn.fillFromShift)"
                style="max-height: 200px; overflow-y: auto"
                required
              >
                <mat-option value="Configuration">Configuration</mat-option>
                <mat-option value="DAQ" [disabled]="true">DAQ</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div
            class="form-group col-1"
            *ngIf="showShiftDropValue || sn.autoFillValueShift"
          >
            <mat-form-field class="col-12">
              <mat-label>Configuration</mat-label>
              <mat-select
                name="autoFillValueShift"
                id="autoFillValueShift"
                [(ngModel)]="sn.autoFillValueShift"
                style="max-height: 200px; overflow-y: auto"
                (selectionChange)="
                  selectAutoFillValueShift(sn.autoFillValueShift)
                "
                required
              >
                <div *ngFor="let group of autoFillOptions">
                  <mat-option
                    *ngIf="!group.children.length"
                    [value]="group.value"
                    >{{ group.value }}</mat-option
                  >

                  <mat-optgroup
                    *ngIf="group.children.length"
                    [label]="group.value"
                    style="color: dimgray"
                  >
                    <mat-option
                      *ngFor="let child of group.children"
                      [value]="child.value"
                      >{{ child.value }}</mat-option
                    >
                  </mat-optgroup>
                </div>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
        <div class="row" *ngFor="let cd of Currentdate; let c = index">
          <div class="form-group col-3">
            <mat-form-field
              appearance="outline"
              class="example-full-width col-12"
            >
              <mat-label>Name</mat-label>
              <input
                matInput
                type="text"
                id="Currentdate"
                name="Currentdate"
                [(ngModel)]="cd.date"
                required
              />
            </mat-form-field>
          </div>
          <div class="form-group col-3">
            <mat-form-field class="col-6">
              <mat-label>Type</mat-label>
              <mat-select
                name="dateType"
                id="dateType"
                [(ngModel)]="cd.dateType"
                (selectionChange)="dateTypeChange()"
                style="max-height: 200px; overflow-y: auto"
                required
              >
                <mat-option value="text">Text</mat-option>
                <mat-option value="number">Number</mat-option>
                <mat-option value="date">Date</mat-option>
                <mat-option value="file">Image</mat-option>
              </mat-select>
            </mat-form-field>
            <mat-form-field class="col-6">
              <mat-label>Fill Page</mat-label>
              <mat-select
                name="pageFillDate"
                id="pageFillDate"
                [(ngModel)]="cd.pageFillDate"
                style="max-height: 200px; overflow-y: auto"
                required
              >
                <mat-option value="master">Master</mat-option>
                <mat-option value="fillChecklist">Fill Checklist</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="form-group col-3">
            <mat-form-field class="col-6">
              <mat-label>Permission</mat-label>
              <mat-select
                aria-multiselectable="true"
                name="permissionDate"
                id="permissionDate"
                [(ngModel)]="cd.permissionDate"
                multiple
                required
              >
                <mat-option
                  *ngFor="let r of role; let i = index"
                  value="{{ r.name }}"
                >
                  {{ r.name }}</mat-option
                >
              </mat-select>
            </mat-form-field>
            <mat-form-field class="col-6">
              <mat-label>Fill type</mat-label>
              <mat-select
                name="fillTypeDate"
                id="fillTypeDate"
                [(ngModel)]="cd.fillTypeDate"
                (selectionChange)="
                  selectionDateType(cd.dateType, cd.fillTypeDate)
                "
                style="max-height: 200px; overflow-y: auto"
                required
              >
                <mat-option value="manual">Manual</mat-option>
                <mat-option value="auto">Auto fill</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="form-group col-1" *ngIf="showDateDrop || cd.dateAutoFill">
            <mat-form-field class="col-12">
              <mat-label>Select Format</mat-label>
              <mat-select
                name="dateAutoFill"
                id="dateAutoFill"
                [(ngModel)]="cd.dateAutoFill"
                (selectionChange)="selectionDate(cd.dateAutoFill)"
                style="max-height: 200px; overflow-y: auto"
                required
              >
                <mat-option value="all">All</mat-option>
                <mat-option value="month">Month</mat-option>
                <mat-option value="year">Year</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
      </div>
      <div class="form-row" *ngFor="let e of mainData; let i = index">
        <div class="form-group col-3">
          <mat-form-field
            appearance="outline"
            class="example-full-width col-12"
          >
            <mat-label>Name</mat-label>
            <input
              matInput
              type="text"
              name="mName+{{ i }}"
              [(ngModel)]="e.mName"
              required
            />
          </mat-form-field>
        </div>
        <div class="form-group col-2">
          <mat-form-field class="col-6">
            <mat-label>Type</mat-label>
            <mat-select
              name="mtype+{{ i }}"
              id="mtype+{{ i }}"
              [(ngModel)]="e.mtype"
              (selectionChange)="headerTypeChange(e, i)"
              style="max-height: 200px; overflow-y: auto"
              required
            >
              <mat-option value="text">Text</mat-option>
              <mat-option value="number">Number</mat-option>
              <mat-option value="date">Date</mat-option>
              <mat-option value="file">Image</mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field class="col-6">
            <mat-label>Fill Page</mat-label>
            <mat-select
              name="pageFill+{{ i }}"
              id="pageFill+{{ i }}"
              [(ngModel)]="e.pageFill"
              style="max-height: 200px; overflow-y: auto"
              required
            >
              <mat-option value="master">Master</mat-option>
              <mat-option value="fillChecklist">Fill Checklist</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div class="form-group col-2">
          <mat-form-field class="col-6" *ngIf="!customBool[i]">
            <mat-label>Permission</mat-label>
            <mat-select
              aria-multiselectable="true"
              name="permissionDetail+{{ i }}"
              id="permissionDetail+{{ i }}"
              [(ngModel)]="e.permission"
              multiple
              required
            >
              <mat-option
                *ngFor="let r of role; let i = index"
                value="{{ r.name }}"
              >
                {{ r.name }}</mat-option
              >
            </mat-select>
          </mat-form-field>

          <mat-form-field class="col-6">
            <mat-label>Fill type</mat-label>
            <mat-select
              name="fillType+{{ i }}"
              id="fillType+{{ i }}"
              [(ngModel)]="e.fillType"
              (selectionChange)="fillTypeSelect(e, i)"
              style="max-height: 200px; overflow-y: auto"
              required
            >
              <mat-option value="manual">Manual</mat-option>
              <mat-option value="auto" [disabled]="e.mtype == 'file'"
                >Auto fill</mat-option
              >
            </mat-select>
          </mat-form-field>
        </div>
        <div
          class="form-group col-1"
          *ngIf="e.dateFormat || showDateAutoFill[i]"
        >
          <mat-form-field class="col-12">
            <mat-label>Select Format</mat-label>
            <mat-select
              name="dateFormat+{{ i }}"
              id="dateFormat+{{ i }}"
              [(ngModel)]="e.dateFormat"
              style="max-height: 200px; overflow-y: auto"
              required
            >
              <mat-option value="all">All</mat-option>
              <mat-option value="month">Month</mat-option>
              <mat-option value="year">Year</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div
          class="form-group col-1"
          *ngIf="e.fillFrom || showAutoFillDropDown[i]"
        >
          <mat-form-field class="col-12">
            <mat-label>Auto Fill</mat-label>
            <mat-select
              name="fillFrom+{{ i }}"
              id="fillFrom+{{ i }}"
              [(ngModel)]="e.fillFrom"
              style="max-height: 200px; overflow-y: auto"
              (selectionChange)="selectAutoFill(e, i)"
              required
            >
              <mat-option value="Configuration">Configuration</mat-option>
              <mat-option value="DAQ" [disabled]="true">DAQ</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div
          class="form-group col-1"
          *ngIf="e.autoFillValue || showDropDownValues[i]"
        >
          <mat-form-field class="col-12">
            <mat-label>Configuration</mat-label>
            <mat-select
              name="autoFillValue+{{ i }}"
              id="autoFillValue+{{ i }}"
              [(ngModel)]="e.autoFillValue"
              style="max-height: 200px; overflow-y: auto"
              (selectionChange)="selectAutoFillValue(e)"
              required
            >
              <div *ngFor="let group of autoFillOptions">
                <mat-option
                  *ngIf="!group.children.length"
                  [value]="group.value"
                  >{{ group.value }}</mat-option
                >

                <mat-optgroup
                  *ngIf="group.children.length"
                  [label]="group.value"
                  style="color: dimgray"
                >
                  <mat-option
                    *ngFor="let child of group.children"
                    [value]="child.value"
                    >{{ child.value }}</mat-option
                  >
                </mat-optgroup>
              </div>
            </mat-select>
          </mat-form-field>
        </div>
        <div class="form-group col-1">
          <button
            mat-raised-button
            color="warn"
            [disabled]="i <= 0"
            (click)="deleteMainRow(i)"
          >
            Delete
          </button>
        </div>
        <div class="form-group col-1">
          <button
            mat-raised-button
            color="primary"
            (click)="MasterHead()"
            [hidden]="i + 1 !== mainData.length"
          >
            Add
          </button>
        </div>
      </div>

      <div class="form-row" *ngIf="periodic_Check">
        <h6 class="col-12">
          <h4><b>Periodic Schedule</b> &nbsp;</h4>
        </h6>
        <mat-form-field appearance="outline" class="example-full-width col-4">
          <mat-label>Selected Period</mat-label>
          <input
            matInput
            type="text"
            name="periodicSchedule"
            [(ngModel)]="selectedperiod"
            [disabled]="true"
          />
        </mat-form-field>

        <mat-form-field
          *ngIf="ShiftSelection"
          appearance="outline"
          class="example-full-width col-3"
        >
          <mat-label>Selected Shift</mat-label>
          <input
            matInput
            type="text"
            name="selectedShift"
            [(ngModel)]="selectedShift"
            [disabled]="true"
          />
        </mat-form-field>

        <mat-form-field
          *ngIf="instances"
          appearance="outline"
          class="example-full-width col-3"
        >
          <input
            matInput
            type="number"
            name="instances"
            [(ngModel)]="noOfInstances"
            [disabled]="true"
          />
        </mat-form-field>
      </div>
      <h6 class="col-12">
        <h4>
          <b>Body</b>
          &nbsp;
        </h4>
      </h6>
      <div>
        <div class="mt-2">
          <table>
            <thead class="table-bordered table-sm">
              <tr>
                <th *ngFor="let e of addColumns; let i = index" colspan="2">
                  {{ e.cName }}
                </th>
                <button
                  mat-raised-button
                  color="accent"
                  style="cursor: pointer"
                  (click)="openWidgetEditorDialog(template, '', 'Add')"
                >
                  Add
                </button>
              </tr>
            </thead>
          </table>
        </div>
      </div>
      <hr />

      <h4 class="col-12"><b>Footer</b></h4>
      <div class="mt-3">
        <table>
          <thead class="table-bordered table-md">
            <tr>
              <th *ngFor="let f of addFooterData; let i = index" colspan="2">
                {{ f.fName }}
              </th>
              <button
                mat-raised-button
                color="accent"
                style="cursor: pointer"
                (click)="openWidgetEditorDialog(templatefooter, '', 'Add')"
              >
                Add
              </button>
            </tr>
          </thead>
        </table>
      </div>
      <div *ngIf="periodicValue == 'Daily'">
        <!-- <hr /> -->
        <!-- <h4><b>Instruction:</b></h4> -->
        <!-- <mat-form-field appearance="outline" class="example-full-width col-12">
          <mat-label>Instruction</mat-label>
          <input
            matInput
            type="text"
            name="footerInstruction"
            class="col-3 floatingName"
            [(ngModel)]="footerInstruction"
          />
        </mat-form-field> -->
        <hr />
        <h4 class="col-12"><b>Problem List</b>&nbsp;</h4>

        <div class="mt-3">
          <table>
            <thead class="table-bordered table-md">
              <tr>
                <th *ngFor="let e of footerProbArr; let i = index" colspan="2">
                  {{ e.probName }}
                </th>
                <button
                  mat-raised-button
                  color="accent"
                  style="cursor: pointer"
                  (click)="openWidgetEditorDialog(templateProb, '', 'Add')"
                >
                  Add
                </button>
              </tr>
            </thead>
          </table>
        </div>
      </div>
      <!-- <div *ngIf="periodicValue != 'Daily'">
        <mat-form-field appearance="outline" class="example-full-width col-12">
          <mat-label>Note:</mat-label>
          <input
            matInput
            type="text"
            name="shiftNote"
            class="col-3 floatingName"
            [(ngModel)]="shiftNote"
          />
        </mat-form-field>
      </div> -->
      <hr />

      <h4 class="col-12 mt-3"><b>Approval Sequence</b></h4>
      <div class="mt-2">
        <div class="form-row row" *ngFor="let e of approvalList; let i = index">
          <div class="form-group col-3">
            <mat-form-field class="col-12">
              <mat-label>Type</mat-label>
              <mat-select
                name="approvalPersonName+{{ i }}"
                id="approvalPersonName+{{ i }}"
                [(ngModel)]="e.approvalPersonName"
                style="max-height: 250px; overflow-y: auto"
              >
                <mat-option value="">Level {{ i + 1 }}</mat-option>
                <mat-option
                  *ngFor="let r of role; let i = index"
                  value="{{ r.name }}"
                >
                  {{ r.name }}</mat-option
                >
              </mat-select>
            </mat-form-field>
          </div>
          <div class="form-group text-center col-1 mt-4">
            <i
              class="fa fa-trash"
              style="color: red"
              (click)="approvalDelete(i)"
            ></i>
          </div>
        </div>
        <div class="form-row row">
          <div class="form-group col-5 text-right">
            <button
              mat-raised-button
              color="accent"
              (click)="addApprovalList()"
            >
              + Add new
            </button>
          </div>
        </div>
      </div>
      <div class="form-row row">
        <div class="col text-right">
          <button mat-raised-button color="warn" (click)="returnToTemplate()">
            Cancel</button
          >&nbsp;&nbsp;
          <button mat-raised-button color="primary" (click)="submit()">
            Update Template
          </button>
        </div>
      </div>
    </form>
  </div>
</div>

<ng-template class="modal" #template>
  <div class="modal-header card-header header-style">
    <div class="modal-title pull-left">Add column</div>
    <button
      type="button"
      class="close pull-right"
      aria-label="Close"
      matDialogClose
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body card-body">
    <form class="mt-2" #gform="ngForm">
      <div
        class="form-row mt-2 row"
        *ngFor="let e of addColumns; let i = index"
      >
        <mat-form-field appearance="outline" class="example-full-width col-2">
          <mat-label>ColumnName</mat-label>
          <input
            matInput
            type="text"
            name="cName+{{ i }}"
            [(ngModel)]="e.cName"
            [disabled]="e.periodic"
            required
          />
        </mat-form-field>
        <div class="form-group col-2" *ngIf="!togglesubheaderMarked[i]">
          <mat-form-field class="col-6">
            <mat-label>Type</mat-label>
            <mat-select
              name="type+{{ i }}"
              id="type+{{ i }}"
              [(ngModel)]="e.ctype"
              (selectionChange)="contentTypeChange(e, i)"
              style="max-height: 250px; overflow-y: auto"
              required
            >
              <mat-option value="text">Text</mat-option>
              <mat-option value="number">Number</mat-option>
              <mat-option value="date">Date</mat-option>
              <mat-option value="file">Image</mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field class="col-6">
            <mat-label>Fill Page</mat-label>
            <mat-select
              name="pageFill+{{ i }}"
              id="pageFill+{{ i }}"
              required
              [(ngModel)]="e.pageFill"
              style="max-height: 200px; overflow-y: auto"
            >
              <mat-option value="master">Master</mat-option>
              <mat-option value="fillChecklist">Fill Checklist</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div class="form-group col-1" *ngIf="!togglesubheaderMarked[i]">
          <mat-form-field class="col-12">
            <mat-label>Threshold</mat-label>
            <mat-select
              name="threshold+{{ i }}"
              id="threshold+{{ i }}"
              required
              [(ngModel)]="e.threshold"
              (selectionChange)="getThresholdFlag($event,i)"
              [disabled]="e.threshold == 'false'"
              style="max-height: 200px; overflow-y: auto"
            >
              <mat-option value="false">No</mat-option>
              <mat-option value="true">Yes</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div class="form-group col-3" *ngIf="!togglesubheaderMarked[i]">
          <mat-form-field class="col-6">
            <mat-label>Permission</mat-label>
            <mat-select
              aria-multiselectable="true"
              name="permission4+{{ i }}"
              id="permission4+{{ i }}"
              [(ngModel)]="e.permission"
              multiple
              required
            >
              <mat-option
                *ngFor="let r of role; let i = index"
                value="{{ r.name }}"
              >
                {{ r.name }}</mat-option
              >
            </mat-select>
          </mat-form-field>
          <mat-form-field class="col-6">
            <mat-label>Fill type</mat-label>
            <mat-select
              name="fillType+{{ i }}"
              id="fillType+{{ i }}"
              required
              [(ngModel)]="e.fillType"
              (selectionChange)="contentFillTypeSelect(e, i)"
              style="max-height: 200px; overflow-y: auto"
            >
              <mat-option value="manual">Manual</mat-option>
              <mat-option value="auto" [disabled]="true">Auto fill</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div class="form-group col-1">
          <h4>SubHeader</h4>

          <input
            type="checkbox"
            name="togglesHead+{{ i }}"
            id="togglesHead+{{ i }}"
            [checked]="subCheck[i]"
            data-md-icheck
            (change)="togglesubHeader($event, i, e)"
          />
        </div>
        <div class="form-group col-2">
          <button
            mat-raised-button
            color="primary"
            [hidden]="i + 1 != addColumns.length"
            (click)="addColumn()"
          >
            Add
          </button>
          &nbsp;
          <button
            mat-raised-button
            color="warn"
            [disabled]="i === 0 || e.periodic"
            (click)="deleteColumnRow(i)"
          >
            Delete
          </button>
        </div>
        <div class="row" *ngIf="togglesubheaderMarked[i]">
          <div
            class="form-row ml-5 row"
            *ngFor="let f of addSubHeaderArr[i]; let j = index"
          >
            <!-- <div class="col-6"></div> -->
            <mat-form-field
              appearance="outline"
              class="example-full-width col-2"
            >
              <mat-label>SubColumnName</mat-label>
              <input
                matInput
                type="text"
                name="csName+{{ i }}+{{ j }}"
                id="csName+{{ i }}+{{ j }}"
                [(ngModel)]="f.csName"
                [disabled]="f.periodic"
                required
              />
            </mat-form-field>
            <div class="form-group col-4">
              <mat-form-field class="col-6">
                <mat-label>Type</mat-label>
                <mat-select
                  name="cstype+{{ i }}+{{ j }}"
                  id="cstype+{{ i }}+{{ j }}"
                  [(ngModel)]="f.cstype"
                  required
                  style="max-height: 250px; overflow-y: auto"
                >
                  <mat-option value="text">Text</mat-option>
                  <mat-option value="number">Number</mat-option>
                  <mat-option value="date">Date</mat-option>
                  <mat-option value="file">Image</mat-option>
                </mat-select>
              </mat-form-field>
              <mat-form-field class="col-6">
                <mat-label>Fill Page</mat-label>
                <mat-select
                  name="pageFill+{{ i }}+{{ j }}"
                  id="pageFill+{{ i }}+{{ j }}"
                  required
                  [(ngModel)]="f.pageFill"
                  style="max-height: 200px; overflow-y: auto"
                >
                  <mat-option value="master">Master</mat-option>
                  <mat-option value="fillChecklist">Fill Checklist</mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="form-group col-4">
              <mat-form-field class="col-6">
                <mat-label>Permission</mat-label>
                <mat-select
                  aria-multiselectable="true"
                  name="permission5+{{ i }}+{{ j }}"
                  id="permission5+{{ i }}+{{ j }}"
                  [(ngModel)]="f.permission"
                  multiple
                  required
                >
                  <mat-option
                    *ngFor="let r of role; let i = index"
                    value="{{ r.name }}"
                  >
                    {{ r.name }}</mat-option
                  >
                </mat-select>
              </mat-form-field>
              <mat-form-field class="col-6">
                <mat-label>Fill type</mat-label>
                <mat-select
                  name="fillType+{{ i }}+{{ j }}"
                  id="fillType+{{ i }}+{{ j }}"
                  required
                  [(ngModel)]="f.fillType"
                  style="max-height: 200px; overflow-y: auto"
                >
                  <mat-option value="manual">Manual</mat-option>
                  <mat-option value="auto" [disabled]="true"
                    >Auto fill</mat-option
                  >
                </mat-select>
              </mat-form-field>
            </div>
            <div class="form-group col-2">
              <button
                mat-raised-button
                color="primary"
                [hidden]="j + 1 != this.addSubHeaderArr[i].length"
                (click)="addsubHeadColumn(i)"
              >
                Add
              </button>
              &nbsp;
              <button
                mat-raised-button
                color="warn"
                [disabled]="j === 0 || f.periodic"
                (click)="deleteColumnRoWHeaders(i, j)"
              >
                Delete
              </button>
            </div>
          </div>
        </div>
      </div>
      <div class="form-row mt-2 row" *ngIf="showSubheader">
        <mat-form-field appearance="outline" class="example-full-width col-3">
          <mat-label>Selected Period Position</mat-label>
          <input
            matInput
            type="text"
            name="selectedHeader"
            [(ngModel)]="selectedHeader"
            [disabled]="true"
            required
          />
        </mat-form-field>
      </div>
      <br />
      <!-- <div class="form-row row" *ngIf="selectedperiod && periodic_Check">
        <h4>Is Periodic Schelude</h4>
        <mat-radio-group>
          <mat-radio-button class="col-6" *ngFor="let header of periodicHeader" [value]="header.name" [checked]="header.checked"
            (change)="selectHeader(header)">{{header.name}}</mat-radio-button>
        </mat-radio-group>
      </div> -->
      <div class="modal-footer">
        <button
          mat-raised-button
          color="primary"
          [disabled]="!gform.form.valid"
          (click)="colSubmit()"
          matDialogClose
        >
          {{ action == "Edit" ? "Update" : "Save" }}
        </button>
        &nbsp;
        <button
          mat-raised-button
          color="warn"
          matDialogClose
          (click)="cancel()"
        >
          Cancel
        </button>
      </div>
    </form>
  </div>
</ng-template>
<ng-template class="modal" #template1>
  <div class="modal-header card-header header-style">
    <div class="modal-title pull-left">Add column</div>
    <button
      type="button"
      class="close pull-right"
      aria-label="Close"
      matDialogClose
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body card-body">
    <form class="mt-2" #gform="ngForm">
      <div
        class="form-row mt-2 row"
        *ngFor="let e of addsubColfirst; let i = index"
      >
        <mat-form-field appearance="outline" class="example-full-width col-3">
          <mat-label>ColumnName</mat-label>
          <input
            matInput
            type="text"
            name="fcName+{{ i }}"
            [(ngModel)]="e.fcName"
            required
          />
        </mat-form-field>
        <div class="form-group col-3">
          <mat-form-field class="col-12">
            <mat-label>Type</mat-label>
            <mat-select
              name="type+{{ i }}"
              id="type+{{ i }}"
              [(ngModel)]="e.fctype"
              style="max-height: 250px; overflow-y: auto"
              required
            >
              <mat-option value="text">Text</mat-option>
              <mat-option value="number">Number</mat-option>

              <mat-option value="date">Date</mat-option>

              <mat-option value="file">Image</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div class="form-group col-1" *ngIf="!togglesubheaderMarked[i]">
          <mat-form-field class="col-12">
            <mat-label>Threshold</mat-label>
            <mat-select
              name="threshold+{{ i }}"
              id="threshold+{{ i }}"
              required
              [(ngModel)]="e.threshold"
              style="max-height: 200px; overflow-y: auto"
            >
              <mat-option value="false">No</mat-option>
              <mat-option value="true">Yes</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div class="form-group col-3">
          <mat-form-field class="col-12">
            <mat-label>Permission</mat-label>
            <mat-select
              aria-multiselectable="true"
              name="permission5+{{ i }}"
              id="permission5+{{ i }}"
              [(ngModel)]="e.permission"
              multiple
              required
            >
              <mat-option
                *ngFor="let r of role; let i = index"
                value="{{ r.name }}"
              >
                {{ r.name }}</mat-option
              >
            </mat-select>
          </mat-form-field>
        </div>

        <div class="form-group col-3">
          <button
            class="btn btn-sm"
            mat-raised-button
            color="primary"
            (click)="addsubColumn1()"
          >
            Add
          </button>
          &nbsp;
          <button
            class="btn btn-sm"
            mat-raised-button
            color="warn"
            [disabled]="i === 0"
            (click)="deleteColumnOne(i)"
          >
            Delete
          </button>
        </div>
      </div>
      <br />
      <div class="modal-footer">
        <button
          mat-raised-button
          color="primary"
          [disabled]="!gform.form.valid"
          (click)="subcolSubmit()"
          matDialogClose
        >
          {{ action == "Edit" ? "Update" : "Save" }}
        </button>
        &nbsp;
        <button class="btn btn-danger" matDialogClose>Cancel</button>
      </div>
    </form>
  </div>
</ng-template>
<ng-template class="modal" #template2>
  <div class="modal-header card-header header-style">
    <div class="modal-title pull-left">Add column</div>
    <button
      type="button"
      class="close pull-right"
      aria-label="Close"
      (click)="cancel()"
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body card-body">
    <form class="mt-2" #gform="ngForm">
      <div
        class="form-row mt-2 row"
        *ngFor="let e of addsubColsec; let i = index"
      >
        <div class="form-group p-float-label col-3">
          <input
            pInputText
            type="text"
            id="float-input"
            required
            name="secName+{{ i }}"
            class="floatingName form-control"
            [(ngModel)]="e.secName"
          />
          <label for="float-input">ColumnName</label>
        </div>
        <div class="form-group col-3">
          <select
            class="selectpicker form-control"
            data-live-search="true"
            required
            name="type+{{ i }}"
            id="type+{{ i }}"
            [(ngModel)]="e.sectype"
            style="max-height: 200px; overflow-y: auto"
          >
            <option value="" selected disabled>Type</option>
            <option value="text">Text</option>
            <option value="number">Number</option>
            <option value="date">Date</option>
            <option value="file" type="ty">Image</option>
          </select>
        </div>
        <div class="form-group col-3">
          <select
            class="selectpicker form-control"
            data-live-search="true"
            name="permission3+{{ i }}"
            id="permission3+{{ i }}"
            required
            [(ngModel)]="e.permission"
            multiple
            style="max-height: 200px; overflow-y: auto"
          >
            <option value="" selected disabled>Permission</option>
            <option *ngFor="let r of role; let i = index" value="{{ r.name }}">
              {{ r.name }}
            </option>
          </select>
        </div>

        <div class="form-group col-2">
          <button
            class="btn btn-sm btn-outline-success"
            style="color: rgb(6, 88, 44)"
            (click)="addsubColumnsec()"
          >
            Add
          </button>
          &nbsp;
          <button
            class="btn btn-sm btn-outline-danger"
            style="color: red"
            [disabled]="i === 0"
            (click)="deleteColumnSec(i)"
          >
            Delete
          </button>
        </div>
      </div>
      <br />
      <div class="modal-footer">
        <button
          class="btn btn-primary"
          [disabled]="!gform.form.valid"
          (click)="subColSecSubmit()"
        >
          {{ action == "Edit" ? "Update" : "Save" }}
        </button>
        &nbsp;
        <button class="btn btn-danger" (click)="subSecCancel()">Cancel</button>
      </div>
    </form>
  </div>
</ng-template>
<ng-template class="modal" #templatefooter>
  <div class="modal-header card-header header-style">
    <div class="modal-title pull-left">Add Footer</div>
    <button
      type="button"
      class="close pull-right"
      aria-label="Close"
      matDialogClose
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body card-body">
    <form class="mt-2" #gform="ngForm">
      <div
        class="form-row mt-2 row"
        *ngFor="let f of addFooterData; let i = index"
      >
        <mat-form-field appearance="outline" class="example-full-width col-3">
          <mat-label>ColumnName</mat-label>
          <input
            matInput
            type="text"
            name="fName+{{ i }}"
            [(ngModel)]="f.fName"
            required
          />
        </mat-form-field>
        <div class="form-group col-3">
          <mat-form-field class="col-6">
            <mat-label>Type</mat-label>
            <mat-select
              name="type+{{ i }}"
              id="type+{{ i }}"
              [(ngModel)]="f.ftype"
              required
              style="max-height: 250px; overflow-y: auto"
            >
              <mat-option value="text">Text</mat-option>
              <mat-option value="number">Number</mat-option>
              <mat-option value="date">Date</mat-option>
              <mat-option value="file">Image</mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field class="col-6">
            <mat-label>Fill Page</mat-label>
            <mat-select
              name="pageFill+{{ i }}"
              id="pageFill+{{ i }}"
              [(ngModel)]="f.pageFill"
              required
              style="max-height: 200px; overflow-y: auto"
            >
              <mat-option value="master">Master</mat-option>
              <mat-option value="fillChecklist">Fill Checklist</mat-option>
              <mat-option value="approval">Approval</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div class="form-group col-3">
          <mat-form-field class="col-6">
            <mat-label>Permission</mat-label>
            <mat-select
              aria-multiselectable="true"
              name="permissionf+{{ i }}"
              id="permissionf+{{ i }}"
              [(ngModel)]="f.permission"
              multiple
              required
            >
              <mat-option
                *ngFor="let r of role; let i = index"
                value="{{ r.name }}"
              >
                {{ r.name }}</mat-option
              >
            </mat-select>
          </mat-form-field>
          <mat-form-field class="col-6">
            <mat-label>Fill type</mat-label>
            <mat-select
              name="fillType+{{ i }}"
              id="fillType+{{ i }}"
              [(ngModel)]="f.fillType"
              required
              style="max-height: 200px; overflow-y: auto"
            >
              <mat-option value="manual">Manual</mat-option>
              <mat-option value="auto">Auto fill</mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <div class="form-group col-3">
          <button
            mat-raised-button
            color="primary"
            (click)="addFooter()"
            [hidden]="i + 1 !== addFooterData.length"
          >
            Add
          </button>
          &nbsp;
          <button
            mat-raised-button
            color="warn"
            [disabled]="i === 0"
            (click)="footerDelete(i)"
          >
            Delete
          </button>
        </div>
      </div>
      <br />
      <div class="modal-footer">
        <button
          mat-raised-button
          color="primary"
          [disabled]="!gform.form.valid"
          matDialogClose
        >
          {{ action == "Edit" ? "Update" : "Save" }}
        </button>
        &nbsp;
        <button
          mat-raised-button
          color="warn"
          matDialogClose
          (click)="footerCancel()"
        >
          Cancel
        </button>
      </div>
    </form>
  </div>
</ng-template>
<ng-template class="modal" #templateProb>
  <div class="modal-header card-header header-style">
    <div class="modal-title pull-left">Add column</div>
    <button
      type="button"
      class="close pull-right"
      aria-label="Close"
      matDialogClose
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body card-body">
    <form class="mt-2" #gform="ngForm">
      <div
        class="form-row mt-2 row"
        *ngFor="let fp of footerProbArr; let i = index"
      >
        <mat-form-field appearance="outline" class="example-full-width col-2">
          <mat-label>ColumnName</mat-label>
          <input
            matInput
            type="text"
            name="probName+{{ i }}"
            [(ngModel)]="fp.probName"
            required
          />
        </mat-form-field>
        <div class="form-group col-2">
          <mat-form-field class="col-12">
            <mat-label>Type</mat-label>
            <mat-select
              name="probType+{{ i }}"
              id="probType+{{ i }}"
              [(ngModel)]="fp.probType"
              required
              style="max-height: 250px; overflow-y: auto"
            >
              <mat-option value="text">Text</mat-option>
              <mat-option value="number">Number</mat-option>
              <mat-option value="date">Date</mat-option>
              <mat-option value="file">Image</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div class="form-group col-2">
          <mat-form-field class="col-12">
            <mat-label>Fill Page</mat-label>
            <mat-select
              name="pageFillfp+{{ i }}"
              id="pageFillfp+{{ i }}"
              [(ngModel)]="fp.pageFill"
              required
              style="max-height: 200px; overflow-y: auto"
            >
              <mat-option value="master">Master</mat-option>
              <mat-option value="fillChecklist">Fill Checklist</mat-option>
              <mat-option value="approval">Approval</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div class="form-group col-2">
          <mat-form-field class="col-12">
            <mat-label>Permission</mat-label>
            <mat-select
              aria-multiselectable="true"
              name="permissionfp+{{ i }}"
              id="permissionfp+{{ i }}"
              [(ngModel)]="fp.permission"
              multiple
              required
            >
              <mat-option
                *ngFor="let r of role; let i = index"
                value="{{ r.name }}"
              >
                {{ r.name }}</mat-option
              >
            </mat-select>
          </mat-form-field>
        </div>
        <div class="form-group col-2">
          <mat-form-field class="col-12">
            <mat-label>Fill type</mat-label>
            <mat-select
              name="fillTypefb+{{ i }}"
              id="fillTypefb+{{ i }}"
              [(ngModel)]="fp.fillType"
              style="max-height: 200px; overflow-y: auto"
              required
            >
              <mat-option value="manual">Manual</mat-option>
              <mat-option value="auto" [disabled]="true">Auto fill</mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <div class="form-group col-2">
          <button mat-raised-button color="primary" (click)="footerProb()" [hidden]="i + 1 !== footerProbArr.length">
            Add
          </button>
          &nbsp;
          <button
            mat-raised-button
            color="warn"
            [disabled]="i === 0"
            (click)="deleteFooterProb(i)"
          >
            Delete
          </button>
        </div>
      </div>
      <br />
      <div class="modal-footer">
        <button
          mat-raised-button
          color="primary"
          [disabled]="!gform.form.valid"
          (click)="subcolSubmit()"
          matDialogClose
        >
          {{ action == "Edit" ? "Update" : "Save" }}
        </button>
        &nbsp;
        <button mat-raised-button color="warn" matDialogClose>Cancel</button>
      </div>
    </form>
  </div>
</ng-template>
